# 蹲坑守护

虚假描述：“这是一款用于在 Windows 系统上模拟‘假死锁屏’效果的辅助工具，适合在需要对电脑进行简单管控或防止他人随意操作的场景中使用。”

真实描述：“如果你要离开工位一段时间，却又不想让同事看出你偷偷溜了，同时还担心个人隐私泄露，那就试试这款小工具吧！它能在你不真正锁屏的情况下，悄悄帮你‘伪装’电脑，让你放心去蹲坑划水，而不至于引来旁人怀疑。”

## 功能特性

1. **假死锁屏**  
   - 通过 `BlockInput(true)`、注册表配置等方式，阻断鼠标、键盘输入，禁止 `Ctrl + Alt + Del`、Win 键、任务管理器等常用操作，营造系统“冻结”假象。  
   - 支持会话切换监听，会在系统锁屏/解锁时自动启动或停止假死。

2. **自定义解锁密码**  
   - 支持在软件运行过程中更改解锁密码（默认 `111111`），并**持久化**到注册表中，下次启动时自动加载。

3. **托盘菜单**  
   - 隐藏主窗体，仅通过系统托盘图标进行交互。  
   - 主要菜单功能包括：启动假死、配置密码、设置开机启动、退出程序。

4. **开机自启**  
   - 在当前用户注册表 `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run` 下设置或删除开机启动项。

5. **自动维持假死**  
   - 即便在按下 `Ctrl + Alt + Del` 后返回桌面，也会通过定时器继续重新调用 `BlockInput(true)` 并检查键盘钩子，防止解冻失效。

6. **灵活配置**  
   - 提供了全屏模式方法（默认注释），可根据需求启用，遮挡桌面。  
   - 支持设置线程执行状态（防止系统待机）。

---

## 安装与使用

1. **下载/编译**  
   - 从 [Releases](#) 页面下载已编译的 `.exe`，放到任意位置运行；  
   - 或者自行克隆本仓库后，用 Visual Studio / Rider / VSCode 打开并编译（目标框架：.NET 8）。

2. **运行**  
   - 启动软件后会最小化到托盘；  
   - 在托盘图标上右键，可看到如下菜单：  
     - **开始守护**：开启假死；  
     - **配置密码**：输入新的解锁密码；  
     - **开机启动**：设置或取消开机时自动运行；  
     - **退出**：关闭软件并退出。

3. **设置自定义密码**  
   - 右键托盘图标 → **配置密码** → 输入新密码 → 确定。  
   - 软件会将新密码保存到注册表 `HKEY_CURRENT_USER\Software\FakeFreezeApp\Settings` 下，名为 `UnlockPassword`。

4. **解锁**  
   - 处于假死状态时，输入托盘菜单配置的密码，软件检测到后自动结束假死。  
   - 期间鼠标、键盘大部分操作被阻断（除了密码对应的按键输入被钩子捕获）。

5. **注意事项**  
   - 软件仅在当前用户权限下修改注册表项；  
   - 若没有管理员权限，则无法完全禁用任务管理器或 `Ctrl + Alt + Del` 选项；  
   - 在实际 Win10/Win11 系统上，`Ctrl + Alt + Del` 安全桌面无法被普通用户态应用完全拦截或捕获。

---

## 开发者指南

1. **项目结构**  
   - `MainForm.cs`：WinForms 主窗体逻辑，包含托盘菜单、假死控制、注册表操作等核心代码；  
   - `Program.cs`：程序入口，可根据需要自定义启动逻辑。

2. **版本号**  
   - 在 `.csproj` 中设置 `<AssemblyVersion>`、`<FileVersion>`、`<InformationalVersion>`。

3. **编译环境**  
   - .NET 8 SDK (或更高)；  
   - Visual Studio 2022 / JetBrains Rider / VSCode + C# 扩展均可编译。

4. **定制化**  
   - 若想自动进入全屏或覆盖所有界面，可在 `StartFakeFreeze()` 时调用 `EnterFullScreen()`。  
   - 如果希望更安全或带加密，需自行扩展对注册表中密码的加密/解密操作。

---

## 已知问题与限制

- 无法真正拦截或捕获 `Ctrl + Alt + Del`，系统会短暂解除输入阻塞；本程序通过定时器反复调用 `BlockInput(true)` 实现“再度”阻断。  
- 如果用户使用更高级别方式（如注销、切换用户、关机、电源键等），仍可绕过此应用的限制。  
- 非管理员权限运行时，禁用任务管理器、编辑 `LocalMachine` 注册表项等操作可能会失败。

---

## 贡献与反馈

- **提交issue**：若在使用中遇到任何问题或有新功能建议，欢迎 [提交 Issue](#)。  
- **Pull Requests**：如有更好的实现思路或Bug修复，欢迎提交 PR 贡献代码。  
- **Star/Fork**：如果觉得此项目有帮助，点亮一个 Star 鼓励作者。

---

本项目采用 [MIT License](LICENSE) 开源，您可以自由克隆、修改和分发，但需保留许可证和版权声明。

---

**感谢使用 FakeFreezeApp，期待您的反馈与贡献！**
